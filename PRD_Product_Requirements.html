<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Requirements Document - SPC Station Health Charts</title>
    <style>
        @page {
            margin: 1in;
        }
        
        body {
            font-family: 'Calibri', 'Arial', sans-serif;
            line-height: 1.6;
            color: #304CB2;
            max-width: 8.5in;
            margin: 0 auto;
            padding: 0.5in;
            background: white;
        }
        
        .header {
            text-align: center;
            border-bottom: 4px solid #304CB2;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .logo-placeholder {
            width: 300px;
            height: 80px;
            margin: 0 auto 20px;
            border: 2px dashed #FFBF27;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #F7F7F7;
            color: #304CB2;
            font-size: 14px;
            font-weight: bold;
        }
        
        h1 {
            color: #304CB2;
            font-size: 28pt;
            margin: 10px 0;
            font-weight: bold;
        }
        
        h2 {
            color: #304CB2;
            font-size: 18pt;
            margin-top: 30px;
            margin-bottom: 15px;
            border-bottom: 2px solid #FFBF27;
            padding-bottom: 5px;
        }
        
        h3 {
            color: #304CB2;
            font-size: 14pt;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        h4 {
            color: #304CB2;
            font-size: 12pt;
            margin-top: 15px;
            margin-bottom: 8px;
        }
        
        .doc-info {
            background: #F7F7F7;
            border-left: 4px solid #304CB2;
            padding: 15px;
            margin: 20px 0;
        }
        
        .doc-info p {
            margin: 5px 0;
            color: #304CB2;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th {
            background: #304CB2;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        
        td {
            border: 1px solid #ddd;
            padding: 10px;
            color: #333;
        }
        
        tr:nth-child(even) {
            background: #F7F7F7;
        }
        
        ul, ol {
            margin: 10px 0;
            padding-left: 25px;
        }
        
        li {
            margin: 5px 0;
            color: #333;
        }
        
        .checkmark {
            color: #2ECC71;
            font-weight: bold;
        }
        
        .crossmark {
            color: #E74C3C;
            font-weight: bold;
        }
        
        .future {
            color: #FFBF27;
        }
        
        .highlight-box {
            background: #FFF9E6;
            border: 2px solid #FFBF27;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .approval-section {
            margin-top: 40px;
            border-top: 3px solid #304CB2;
            padding-top: 20px;
        }
        
        p {
            color: #333;
            text-align: justify;
        }
        
        strong {
            color: #304CB2;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #ddd;
            color: #666;
            font-size: 10pt;
        }
    </style>
</head>
<body>
    <div class="header">
        <div style="text-align: center; margin: 0 auto 20px;">
            <img src="SW Tech Ops logo.png" alt="Southwest Tech Ops" style="height: 150px; width: auto;">
        </div>
        <h1>Product Requirements Document (PRD)</h1>
        <h2 style="border: none; margin-top: 0;">SPC Station Health Charts</h2>
    </div>

    <div class="doc-info">
        <p><strong>Version:</strong> 1.6</p>
        <p><strong>Date:</strong> October 9, 2025</p>
        <p><strong>Owner:</strong> Technical Operations Analytics Team</p>
        <p><strong>Status:</strong> Delivered with Debug Tools</p>
        <p><strong>Enhancement:</strong> CSV Troubleshooting & Enhanced Error Reporting</p>
    </div>

    <h2>1. Executive Summary</h2>

    <h3>Problem Statement</h3>
    <p>Airline technical operations teams need to monitor maintenance metrics across multiple stations to identify process variations and operational shifts. Current analysis methods involve manual Excel charting that:</p>
    <ul>
        <li>Lacks statistical rigor</li>
        <li>Doesn't detect process shifts consistently</li>
        <li>Requires extensive manual effort</li>
        <li>Cannot be easily shared or reproduced</li>
    </ul>

    <h3>Solution</h3>
    <p>A lightweight, desktop-based Statistical Process Control (SPC) dashboard that:</p>
    <ul>
        <li>Runs locally without requiring web server infrastructure</li>
        <li>Implements industry-standard Wheeler's Rules for process control</li>
        <li>Auto-detects process phases and calculates control limits</li>
        <li>Exports publication-ready PNG charts</li>
        <li>Requires only Python (no admin rights needed)</li>
    </ul>

    <h3>Success Metrics</h3>
    <ul>
        <li><span class="checkmark">✅</span> Deployment to all stations without IT support tickets</li>
        <li><span class="checkmark">✅</span> Zero external dependencies (CDN, npm, web servers)</li>
        <li><span class="checkmark">✅</span> Accurate phase detection using Wheeler's methodology</li>
        <li><span class="checkmark">✅</span> Historical data coverage (Jan 2023 - present)</li>
        <li><span class="checkmark">✅</span> Export capability for executive reporting</li>
    </ul>

    <h2>2. Business Requirements</h2>

    <h3>BR-01: Minimal Technical Barriers</h3>
    <p><strong>Priority:</strong> P0 (Critical)<br>
    <strong>Rationale:</strong> Users lack local admin rights and IT support is limited</p>

    <p><strong>Requirements:</strong></p>
    <ul>
        <li>Must run with Python-only (version 3.7+)</li>
        <li>No npm, Node.js, or web server installation required</li>
        <li>Single-click launch via batch file</li>
        <li>Works on corporate locked-down Windows machines</li>
    </ul>

    <p><strong>Acceptance Criteria:</strong></p>
    <ul>
        <li>User can extract zip and run without any additional installations</li>
        <li>No firewall/proxy issues (no CDN dependencies)</li>
        <li>Functions offline</li>
    </ul>

    <h3>BR-02: Statistical Accuracy</h3>
    <p><strong>Priority:</strong> P0 (Critical)<br>
    <strong>Rationale:</strong> Decisions about maintenance process changes depend on accurate signal detection</p>

    <p><strong>Requirements:</strong></p>
    <ul>
        <li>Implement Wheeler's XmR (Individuals and Moving Range) charts</li>
        <li>Use Natural Process Limits (2.66 sigma)</li>
        <li>Detect phases using Wheeler's Rules #1 and #4</li>
        <li>Calculate limits from baseline data, not entire dataset</li>
    </ul>

    <p><strong>Acceptance Criteria:</strong></p>
    <ul>
        <li>Matches Wheeler's methodology exactly</li>
        <li>Detects realistic process shifts (not noise)</li>
        <li>Limits recalculate when true shifts occur</li>
        <li>Moving Range chart tracks process variation</li>
    </ul>

    <h3>BR-03: Historical Data Coverage</h3>
    <p><strong>Priority:</strong> P1 (High)<br>
    <strong>Rationale:</strong> Need to analyze trends over 2+ years for pattern recognition</p>

    <p><strong>Requirements:</strong></p>
    <ul>
        <li>Display data from January 2023 to current week</li>
        <li>Support 4 key maintenance metrics</li>
        <li>Track 3 major hub stations (AUS, DAL, HOU)</li>
    </ul>

    <p><strong>Acceptance Criteria:</strong></p>
    <ul>
        <li>All charts show 140+ weeks of data</li>
        <li>Data updates weekly</li>
        <li>Historical patterns visible for comparison</li>
    </ul>

    <h3>BR-04: Flexible Data Input</h3>
    <p><strong>Priority:</strong> P1 (High)<br>
    <strong>Rationale:</strong> Different data sources use different formats</p>

    <p><strong>Requirements:</strong></p>
    <ul>
        <li>Auto-detect CSV format on upload</li>
        <li>Support Format A: timestamp,station,metric_value (filename = measure)</li>
        <li>Support Format B: station,measure,date,value</li>
        <li>Map station names automatically (e.g., "Dallas" → "DAL")</li>
    </ul>

    <p><strong>Acceptance Criteria:</strong></p>
    <ul>
        <li>Upload succeeds for both formats without user intervention</li>
        <li>Clear error messages if format is unsupported</li>
        <li>Filename becomes chart title for Format A</li>
    </ul>

    <h3>BR-05: Chart Export</h3>
    <p><strong>Priority:</strong> P1 (High)<br>
    <strong>Rationale:</strong> Charts must be embedded in PowerPoint presentations and executive reports</p>

    <p><strong>Requirements:</strong></p>
    <ul>
        <li>Save individual charts as PNG images</li>
        <li>High resolution suitable for printing</li>
        <li>Filename matches chart name</li>
        <li>One-click download per chart</li>
    </ul>

    <p><strong>Acceptance Criteria:</strong></p>
    <ul>
        <li>PNG saves to local file system</li>
        <li>Image quality sufficient for 1920x1080 displays</li>
        <li>Transparent or white background</li>
    </ul>

    <h2>3. User Stories</h2>

    <div class="highlight-box">
        <h3>US-01: Maintenance Manager</h3>
        <p><strong>As a</strong> maintenance station manager<br>
        <strong>I want to</strong> quickly identify when my station's performance shifts<br>
        <strong>So that</strong> I can investigate root causes immediately</p>
        <p><strong>Acceptance Criteria:</strong></p>
        <ul>
            <li>Load latest data in &lt; 5 seconds</li>
            <li>Visual indicators show phase boundaries</li>
            <li>Control limits update automatically when shifts occur</li>
        </ul>
    </div>

    <div class="highlight-box">
        <h3>US-02: Tech Ops Analyst</h3>
        <p><strong>As a</strong> technical operations analyst<br>
        <strong>I want to</strong> upload my own CSV data<br>
        <strong>So that</strong> I can analyze custom metrics not in the standard set</p>
        <p><strong>Acceptance Criteria:</strong></p>
        <ul>
            <li>Upload button accepts .csv files</li>
            <li>Auto-detects format</li>
            <li>Generates X and mR charts automatically</li>
        </ul>
    </div>

    <div class="highlight-box">
        <h3>US-03: Executive Reporting</h3>
        <p><strong>As a</strong> senior operations director<br>
        <strong>I want to</strong> export charts as images<br>
        <strong>So that</strong> I can include them in monthly board presentations</p>
        <p><strong>Acceptance Criteria:</strong></p>
        <ul>
            <li>Download button on each chart</li>
            <li>PNG format with clean styling</li>
            <li>Chart title included in image</li>
        </ul>
    </div>

    <div class="highlight-box">
        <h3>US-04: Field Technician (Limited IT Access)</h3>
        <p><strong>As a</strong> field technician with no admin rights<br>
        <strong>I want to</strong> run the dashboard on my corporate laptop<br>
        <strong>So that</strong> I don't need to wait for IT to install software</p>
        <p><strong>Acceptance Criteria:</strong></p>
        <ul>
            <li>Runs with only Python installed</li>
            <li>Double-click to launch</li>
            <li>No command-line expertise required</li>
        </ul>
    </div>

    <h2>4. Functional Requirements</h2>

    <h3>FR-01: Data Loading</h3>
    <ul>
        <li><strong>FR-01.1:</strong> Load test data from /input folder via "Load Test Data" button</li>
        <li><strong>FR-01.2:</strong> Upload individual CSV files via "Upload CSV" button</li>
        <li><strong>FR-01.3:</strong> Display loading indicators during data processing</li>
        <li><strong>FR-01.4:</strong> Show clear error messages if data format invalid</li>
    </ul>

    <h3>FR-02: Chart Rendering</h3>
    <ul>
        <li><strong>FR-02.1:</strong> Display both X (Individuals) and mR (Moving Range) charts</li>
        <li><strong>FR-02.2:</strong> Color-code data points (blue for normal, red for out-of-control)</li>
        <li><strong>FR-02.3:</strong> Draw control limits (UCL, CL, LCL) as horizontal lines</li>
        <li><strong>FR-02.4:</strong> Label phase boundaries visually</li>
        <li><strong>FR-02.5:</strong> Auto-scale Y-axis based on data range</li>
    </ul>

    <h3>FR-03: Phase Detection</h3>
    <ul>
        <li><strong>FR-03.1:</strong> Establish baseline with minimum 20 points</li>
        <li><strong>FR-03.2:</strong> Calculate limits from baseline data only</li>
        <li><strong>FR-03.3:</strong> Monitor for Rule #1: Point beyond control limits</li>
        <li><strong>FR-03.4:</strong> Monitor for Rule #4: 7 consecutive points on one side of centerline</li>
        <li><strong>FR-03.5:</strong> Start new phase when signal detected</li>
        <li><strong>FR-03.6:</strong> Recalculate limits for new phase</li>
    </ul>

    <h3>FR-04: Station Filtering</h3>
    <ul>
        <li><strong>FR-04.1:</strong> Dropdown to select individual station</li>
        <li><strong>FR-04.2:</strong> "All Stations" option to view all</li>
        <li><strong>FR-04.3:</strong> Charts update dynamically on selection change</li>
    </ul>

    <h3>FR-05: Export</h3>
    <ul>
        <li><strong>FR-05.1:</strong> "Save PNG" button on each chart</li>
        <li><strong>FR-05.2:</strong> Download triggers browser save dialog</li>
        <li><strong>FR-05.3:</strong> Filename = sanitized chart title + .png</li>
    </ul>

    <h2>5. Non-Functional Requirements</h2>

    <table>
        <tr>
            <th>Category</th>
            <th>Requirement</th>
        </tr>
        <tr>
            <td><strong>Performance</strong></td>
            <td>
                • Dashboard loads in &lt; 3 seconds<br>
                • Chart rendering completes in &lt; 1 second per chart<br>
                • CSV processing handles 10,000+ rows without lag
            </td>
        </tr>
        <tr>
            <td><strong>Usability</strong></td>
            <td>
                • No training required for basic usage<br>
                • Instructions visible on welcome screen<br>
                • Error messages actionable and clear
            </td>
        </tr>
        <tr>
            <td><strong>Reliability</strong></td>
            <td>
                • Handles missing data gracefully<br>
                • Validates CSV format before processing<br>
                • Doesn't crash on malformed input
            </td>
        </tr>
        <tr>
            <td><strong>Maintainability</strong></td>
            <td>
                • Pure Python + HTML/JavaScript (no frameworks)<br>
                • Well-commented code<br>
                • Modular architecture (separate concerns)
            </td>
        </tr>
        <tr>
            <td><strong>Portability</strong></td>
            <td>
                • Works on Windows, Mac, Linux<br>
                • No hardcoded paths (relative paths only)<br>
                • Python 3.7+ compatible
            </td>
        </tr>
    </table>

    <h2>6. Out of Scope (Explicitly Excluded)</h2>

    <h3>V1.0 Exclusions</h3>
    <ul>
        <li><span class="crossmark">❌</span> Database storage - CSV files only</li>
        <li><span class="crossmark">❌</span> Multi-user collaboration - Single-user desktop tool</li>
        <li><span class="crossmark">❌</span> Authentication/Authorization - Local tool, no security needed</li>
        <li><span class="crossmark">❌</span> Real-time data updates - Manual refresh only</li>
        <li><span class="crossmark">❌</span> Mobile support - Desktop browsers only</li>
        <li><span class="crossmark">❌</span> Cloud deployment - Local only</li>
        <li><span class="crossmark">❌</span> Advanced SPC rules - Only Wheeler's Rule #1 and #4</li>
        <li><span class="crossmark">❌</span> Automated data collection - Manual CSV upload</li>
    </ul>

    <h3>Future Considerations (V2.0+)</h3>
    <ul>
        <li><span class="future">🔮</span> Additional Wheeler's Rules (#2: runs near limits, #3: trends)</li>
        <li><span class="future">🔮</span> Automated email reports</li>
        <li><span class="future">🔮</span> Comparison mode (station vs station)</li>
        <li><span class="future">🔮</span> Annotation/commenting on charts</li>
        <li><span class="future">🔮</span> Data export to Excel</li>
        <li><span class="future">🔮</span> Integration with airline ERP systems</li>
    </ul>

    <h2>7. Constraints & Assumptions</h2>

    <h3>Constraints</h3>
    <ol>
        <li><strong>No admin rights</strong> - Users cannot install software</li>
        <li><strong>Corporate firewall</strong> - CDN access blocked (unpkg, jsdelivr, etc.)</li>
        <li><strong>Python availability</strong> - Python 3.7+ already installed enterprise-wide</li>
        <li><strong>Weekly data granularity</strong> - Daily not available from source systems</li>
    </ol>

    <h3>Assumptions</h3>
    <ol>
        <li>Users have basic computer literacy (can extract zip files)</li>
        <li>CSV data is reasonably clean (no extensive validation needed)</li>
        <li>Python http.server module available (standard library)</li>
        <li>Modern browser available (Chrome, Edge, Firefox - last 2 years)</li>
    </ol>

    <h2>8. Risks & Mitigations</h2>

    <table>
        <tr>
            <th>Risk</th>
            <th>Impact</th>
            <th>Probability</th>
            <th>Mitigation</th>
        </tr>
        <tr>
            <td>Python not installed</td>
            <td>High</td>
            <td>Low</td>
            <td>Include Python check in launcher; provide install link</td>
        </tr>
        <tr>
            <td>Port 8000 in use</td>
            <td>Medium</td>
            <td>Medium</td>
            <td>Document how to change port in server.py</td>
        </tr>
        <tr>
            <td>CSV format changes</td>
            <td>Medium</td>
            <td>Medium</td>
            <td>Auto-detection logic; clear error messages</td>
        </tr>
        <tr>
            <td>Browser compatibility</td>
            <td>Medium</td>
            <td>Low</td>
            <td>Use standard HTML5 Canvas (widely supported)</td>
        </tr>
        <tr>
            <td>Data quality issues</td>
            <td>Medium</td>
            <td>Medium</td>
            <td>Input validation; graceful error handling</td>
        </tr>
    </table>

    <h2>9. Glossary</h2>

    <table>
        <tr>
            <th>Term</th>
            <th>Definition</th>
        </tr>
        <tr>
            <td><strong>SPC</strong></td>
            <td>Statistical Process Control</td>
        </tr>
        <tr>
            <td><strong>UCL/LCL</strong></td>
            <td>Upper/Lower Control Limit</td>
        </tr>
        <tr>
            <td><strong>CL</strong></td>
            <td>Center Line (mean)</td>
        </tr>
        <tr>
            <td><strong>XmR Chart</strong></td>
            <td>Individuals (X) and Moving Range (mR) chart</td>
        </tr>
        <tr>
            <td><strong>NPL</strong></td>
            <td>Natural Process Limits (2.66 sigma)</td>
        </tr>
        <tr>
            <td><strong>Wheeler's Rules</strong></td>
            <td>Statistical rules for detecting special cause variation</td>
        </tr>
        <tr>
            <td><strong>Phase</strong></td>
            <td>Period of stable process performance with consistent limits</td>
        </tr>
    </table>

    <div class="approval-section">
        <h2>Approval</h2>
        <table>
            <tr>
                <th>Role</th>
                <th>Name</th>
                <th>Date</th>
                <th>Signature</th>
            </tr>
            <tr>
                <td>Product Owner</td>
                <td>Tech Ops Manager</td>
                <td>2025-10-06</td>
                <td><span class="checkmark">✅</span> Approved</td>
            </tr>
            <tr>
                <td>Technical Lead</td>
                <td>Development Team</td>
                <td>2025-10-06</td>
                <td><span class="checkmark">✅</span> Delivered</td>
            </tr>
            <tr>
                <td>End User Rep</td>
                <td>Station Manager (AUS)</td>
                <td>2025-10-06</td>
                <td><span class="checkmark">✅</span> Accepted</td>
            </tr>
        </table>
    </div>

    <div class="footer">
        <p><strong>Document Version History</strong></p>
        <table>
            <tr>
                <th>Version</th>
                <th>Date</th>
                <th>Author</th>
                <th>Changes</th>
            </tr>
            <tr>
                <td>1.0</td>
                <td>2025-10-06</td>
                <td>Development Team</td>
                <td>Initial release</td>
            </tr>
        </table>
        <p style="margin-top: 30px; font-style: italic;">Southwest Airlines - Technical Operations Analytics Team</p>
    </div>
</body>
</html>
